{% extends "base.html" %}
{% block title %}Оформление преступников{% endblock %}

{% block content %}
    <h1>Архив</h1>
    
    <form method="GET" action="" class="filter-form">
        <input type="text" name="cs" placeholder="Номер дела" value="{{ request.GET.cs }}">
        <input type="text" name="person_id" placeholder="ID" value="{{ request.GET.person_id }}">
        <input type="text" name="fio" placeholder="ФИО" value="{{ request.GET.fio }}">
        <!-- Новое поле для номера статьи -->
        <input type="text" name="article_num" placeholder="Номер статьи" value="{{ request.GET.article_num }}">
        
        <button type="submit">Фильтровать</button>
        <a href="{% url 'archive_panishment' %}" class="reset-button">
            <button type="button">Сбросить</button>
        </a>
    </form>

    <table>
        <thead>
            <tr>
                <th>Номер дела</th>
                <th>ID</th>
                <th>ФИО</th>
                <th>Номер статьи</th>
                <th>Тип наказания</th>
                <th>Значение</th>
                <th>Тип дела</th>
            </tr>
        </thead>
        <tbody>
            {% for panishment in panishments|dictsortreversed:"panishment_num" %}
            <tr>
                <td>{{ panishment.cs_id }}</td>
                <td>{{ panishment.person_id }}</td>
                <td>{{ panishment.fio }}</td>
                <td>{{ panishment.article_num }}</td>
                <td>{{ panishment.get_punishment_type_display }}</td>
                <td>{{ panishment.numerical_value }}</td>
                <td>{{ panishment.get_fi_flag_display }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7">Записей пока нет</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
